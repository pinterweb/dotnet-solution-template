{
    "$schema": "http://json.schemastore.org/template",
    "author": "Jeremy Zagorski",
    "classifications": [ "Solution", "Web", "WebApi", "Routing" ],
    "identity": "WebApiSolution.CSharp",
    "name": "ASP.NET Core Web API Routing Solution",
    "shortName": "webapi-bizapp",
    "tags": {
        "language": "C#",
        "type": "project"
    },
    "sourceName": "BusinessApp",
    "symbols":{
        "description": {
            "type": "parameter",
            "dataType": "string",
            "replaces":"$(product_description)",
            "defaultValue": "",
            "isRequired": "false",
            "description": "A description of your app"
        },
        "copyrightName": {
            "type": "parameter",
            "dataType": "string",
            "isRequired": "false",
            "description": "Your personal or company copyright"
        },
        "copyrightYear": {
            "type": "generated",
            "generator": "now",
            "replaces": "1975-1975",
            "parameters": {
                "format": "yyyy"
            }
        },
        "efcore": {
            "type": "parameter",
            "dataType": "bool",
            "defaultValue": "true",
            "description": "Adds services for entity framework core in your data layer"
        },
        "json": {
            "type": "parameter",
            "dataType": "bool",
            "defaultValue": "true",
            "description": "Adds services to parse json payloads"
        },
        "connstrName": {
            "type": "parameter",
            "dataType": "string",
            "isRequired": "false",
            "defaultValue": "SQLCONNSTR_BUSINESSAPPLICATION",
            "replaces": "SQLCONNSTR_BUSINESSAPPLICATION",
            "description": "Connection string name for your application"
        },
        "docker": {
            "type": "parameter",
            "dataType": "bool",
            "isRequired": "false",
            "defaultValue": "false",
            "description": "Adds support for docker and docker-compose. Set it up with docker_run.cmd"
        },
        "fluentvalidation": {
            "type": "parameter",
            "dataType": "bool",
            "isRequired": "false",
            "defaultValue": "false",
            "description": "Adds services integrate the fluent validation library"
        },
        "winauth": {
            "type": "parameter",
            "dataType": "bool",
            "isRequired": "false",
            "defaultValue": "false",
            "description": "Adds windows authentication"
        },
        "copyrightReplacer": {
            "type": "generated",
            "generator": "coalesce",
            "parameters": {
                "sourceVariableName": "copyrightName",
                "fallbackVariableName": "name"
            },
            "replaces": "$(Your Copyright Name)"
        },
        "compilerDirectives": {
             "type": "generated",
             "generator": "constant",
             "parameters": {
                 "value":"#"
              },
              "replaces":"//#"
        }
    },
    "sources": [
        {
            "modifiers": [
                {
                    "exclude": [
                        "src/.vs/**"
                    ]
                },
                {
                    "condition": "(!efcore)",
                    "exclude": [
                        "src/.config/dotnet-tools.json",
                        "src/BusinessApp.Data/BusinessAppDbContext.cs",
                        "src/BusinessApp.Data/BusinessAppReadOnlyDbContext.cs",
                        "src/BusinessApp.Data/database_restore.cmd",
                        "src/BusinessApp.Data/database_restore.sh",
                        "src/BusinessApp.Data/database_up.cmd",
                        "src/BusinessApp.Data/database_up.sh",
                        "src/BusinessApp.Data/EFEnvelopedQueryHandler.cs",
                        "src/BusinessApp.Data/EFIdentityMap.cs",
                        "src/BusinessApp.Data/EFQueryFieldsVisitor.cs",
                        "src/BusinessApp.Data/EFQueryFieldsVisitorFactory.cs",
                        "src/BusinessApp.Data/EFQueryStrategyHandler.cs",
                        "src/BusinessApp.Data/EFQueryVisitor.cs",
                        "src/BusinessApp.Data/EFQueryVisitorFactory.cs",
                        "src/BusinessApp.Data/IDbSetVisitor.cs",
                        "src/BusinessApp.Data/IDbSetVisitorFactory.cs",
                        "src/BusinessApp.Data/NullDbSetVisitor.cs",
                        "src/BusinessApp.Data/NullDbSetVisitorFactory.cs",
                        "src/BusinessApp.Data/EventRepository.cs",
                        "src/BusinessApp.Data/migrations_add.cmd",
                        "src/BusinessApp.Data/migrations_add.sh",
                        "src/BusinessApp.Data/migrations_restore.cmd",
                        "src/BusinessApp.Data/migrations_restore.sh",
                        "src/BusinessApp.Data/Migrations/**"
                    ]
                },
                {
                    "condition": "(!fluentvalidation)",
                    "exclude": [
                        "src/BusinessApp.App/FluentValidationValidator.cs"
                    ]
                },
                {
                    "condition": "(!json)",
                    "exclude": [
                        "src/BusinessApp.WebApi/Json/**"
                    ]
                },
                {
                    "condition": "(!docker)",
                    "exclude": [
                        "src/.env",
                        "src/docker-compose.yml",
                        "src/Dockerfile",
                        "src/docker_run.cmd",
                        "src/.dockerignore",
                        "src/BusinessApp.WebApi/.env.docker"
                    ]
                },
                {
                    "condition": "(docker)",
                    "exclude": [
                        "src/BusinessApp.WebApi/.env"
                    ],
                    "rename": {
                        "src/BusinessApp.WebApi/.env.docker": "src/BusinessApp.WebApi/.env"
                    }
                }
            ]
        }
    ],
    "SpecialCustomOperations": {
        "**/*.json": {
            "operations": [
                {
                    "type": "conditional",
                    "configuration": {
                        "if": ["\"__#if\":"],
                        "endif": ["\"__#endif\": null"],
                        "trim" : "true",
                        "wholeLine": "true"
                    }
                }
            ]
        }
    }
}
